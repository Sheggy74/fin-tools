import{g as C,p as _,c as P,r as c,u as R,a as s,f as F,m as h,b as S,_ as T,d as A,e as g,w as u,V as U,o as x,h as j,i as q,j as w,t as b,k as B,l as D,n as y,q as N,s as E,v as k,x as $,y as I}from"./index-ByBzKDbo.js";const L=_({...S(),...h()},"VForm"),M=C()({name:"VForm",props:L(),emits:{"update:modelValue":d=>!0,submit:d=>!0},setup(d,o){let{slots:m,emit:p}=o;const f=P(d),a=c();function v(n){n.preventDefault(),f.reset()}function V(n){const i=n,r=f.validate();i.then=r.then.bind(r),i.catch=r.catch.bind(r),i.finally=r.finally.bind(r),p("submit",i),i.defaultPrevented||r.then(e=>{var t;let{valid:l}=e;l&&((t=a.value)==null||t.submit())}),i.preventDefault()}return R(()=>{var n;return s("form",{ref:a,class:["v-form",d.class],style:d.style,novalidate:!0,onReset:v,onSubmit:V},[(n=m.default)==null?void 0:n.call(m,f)])}),F(f,a)}}),Y={__name:"AuthPage",setup(d){const o=c(!0),m=c(null),p=c(!1),f=A(),a=c({email:"",password:"",confirmPassword:""}),v=[e=>!!e||"Email обязателен",e=>/.+@.+\..+/.test(e)||"Некорректный email"],V=[e=>!!e||"Пароль обязателен",e=>e.length>=6||"Минимум 6 символов"],n=[e=>!!e||"Подтвердите пароль",e=>e===a.value.password||"Пароли не совпадают"],i=()=>{var e;(e=m.value)!=null&&e.validate()&&(o.value?console.log("Вход:",a.value):console.log("Регистрация:",a.value))};function r(){f.login({email:a.email}),I.push("/")}return(e,l)=>(x(),g(U,{class:"fill-height d-flex justify-center align-center"},{default:u(()=>[s(j,{class:"pa-6","max-width":"400"},{default:u(()=>[s(q,{class:"text-h5 text-center"},{default:u(()=>[w(b(o.value?"Вход":"Регистрация"),1)]),_:1}),s(B,null,{default:u(()=>[s(M,{onSubmit:D(i,["prevent"]),ref_key:"formRef",ref:m,modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=t=>p.value=t)},{default:u(()=>[s(y,{modelValue:a.value.email,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.email=t),label:"Email",rules:v,required:"",type:"email",autocomplete:"email"},null,8,["modelValue"]),s(y,{modelValue:a.value.password,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.password=t),label:"Пароль",rules:V,required:"",type:"password",autocomplete:"current-password"},null,8,["modelValue"]),s(N,null,{default:u(()=>[o.value?E("",!0):(x(),g(y,{key:0,modelValue:a.value.confirmPassword,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.confirmPassword=t),label:"Повторите пароль",rules:n,type:"password",autocomplete:"new-password"},null,8,["modelValue"]))]),_:1}),s(k,{class:"mt-4",disabled:!p.value,color:"primary",type:"submit",block:"",onClick:l[3]||(l[3]=t=>r())},{default:u(()=>[w(b(o.value?"Войти":"Зарегистрироваться"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),s($,{class:"justify-center"},{default:u(()=>[s(k,{variant:"text",onClick:l[5]||(l[5]=t=>o.value=!o.value)},{default:u(()=>[w(b(o.value?"Нет аккаунта? Зарегистрируйтесь":"Уже есть аккаунт? Войти"),1)]),_:1})]),_:1})]),_:1})]),_:1}))}},G=T(Y,[["__scopeId","data-v-8f76a8a6"]]);export{G as default};
